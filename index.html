<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Turbo Turf Trimmer</title>
  <style>
    :root { --bg:#0b1b0f; --ui: rgba(255,255,255,0.9); --accent:#2fe06f; }
    html,body{height:100%}
    body{margin:0;background:var(--bg);overflow:hidden;font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif;color:#fff}
    #game{display:block;width:100vw;height:100vh;touch-action:none}
    .hud{position:fixed;inset:16px auto auto 16px;z-index:10;display:flex;gap:12px;align-items:center;flex-wrap:wrap;background:rgba(0,0,0,.35);backdrop-filter:blur(6px);border:1px solid rgba(255,255,255,.12);border-radius:12px;padding:10px 12px;box-shadow:0 8px 24px rgba(0,0,0,.35)}
    .pill{padding:6px 10px;border-radius:999px;background:rgba(255,255,255,.1);font-weight:600}
    .btn{-webkit-tap-highlight-color:transparent;cursor:pointer;border:0;border-radius:10px;padding:8px 12px;font-weight:700;background:#111;color:#fff;outline:1px solid rgba(255,255,255,.16)}
    .btn:hover{outline-color:rgba(255,255,255,.36)}
    .help{position:fixed;right:16px;bottom:16px;z-index:10;max-width:420px;line-height:1.35;font-size:14px;color:rgba(255,255,255,.9);background:rgba(0,0,0,.35);backdrop-filter:blur(6px);border:1px solid rgba(255,255,255,.12);border-radius:12px;padding:12px 14px}
    .help kbd{background:#111;color:#fff;border-radius:6px;padding:2px 6px;border:1px solid rgba(255,255,255,.2)}
    .stick{position:fixed;left:16px;bottom:16px;width:120px;height:120px;z-index:9;border-radius:50%;background:rgba(0,0,0,.25);border:1px solid rgba(255,255,255,.12);touch-action:none}
    .stick .nub{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:52px;height:52px;border-radius:50%;background:rgba(255,255,255,.6);mix-blend-mode:screen;box-shadow:0 8px 24px rgba(0,0,0,.35);pointer-events:none}
    /* Retro intro */
    .intro{position:fixed;inset:0;display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:20;background:radial-gradient(1200px 800px at 50% 50%, rgba(15,40,20,.95), rgba(6,18,10,.98));text-align:center}
    .title{font-family:"Courier New",monospace;font-weight:800;letter-spacing:2px;text-transform:uppercase;font-size:clamp(28px,6vw,72px);text-shadow:0 0 6px #1aff7a,0 0 18px #0aff52,2px 2px 0 #000;margin:0 0 10px 0}
    .subtitle{font-family:"Courier New",monospace;color:#bfffd6;opacity:.9;margin-bottom:24px}
    .credit{opacity:.7;font-size:12px;margin-top:24px;font-family:"Courier New",monospace}
    /* Win modal */
    .modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;z-index:30;background:rgba(0,0,0,.55);backdrop-filter:blur(3px)}
    .modal.show{display:flex}
    .card{background:rgba(0,0,0,.6);border:1px solid rgba(255,255,255,.15);border-radius:14px;padding:18px;min-width:280px;text-align:center;box-shadow:0 12px 36px rgba(0,0,0,.45)}
    .card h2{margin:0 0 6px 0}
    .bestlist{list-style:none;margin:8px 0 0 0;padding:0;font-variant-numeric:tabular-nums;text-align:left}
    .bestlist li{display:flex;justify-content:space-between;padding:2px 0}
    /* Score sidebar */
    .sidebar{position:fixed;top:16px;right:16px;z-index:10;background:rgba(0,0,0,.35);backdrop-filter:blur(6px);border:1px solid rgba(255,255,255,.12);border-radius:12px;padding:10px 12px;min-width:220px}
    .sidebar h4{margin:0 0 6px 0;font-size:14px;opacity:.9}
    .time{font-variant-numeric:tabular-nums;font-weight:700}
    /* Mobile fix: bump help box up when joystick is present */
    .touch .help { bottom: 152px; }
  </style>
</head>
<body>
  <canvas id="game"></canvas>

  <div class="hud">
    <div class="pill">Cut: <span id="pct">0</span>%</div>
    <div class="pill">Time: <span id="time">00:00.0</span></div>
    <button class="btn" id="reset">Reset (R)</button>
    <button class="btn" id="fullscreen">Fullscreen (F)</button>
    <button class="btn" id="contrast">High Contrast: On</button>
  </div>

  <div class="help">
    <strong>How to play:</strong> Arrow keys / WASD to drive. On touch, use the left joystick or drag.
    Press <kbd>Enter</kbd> or click <em>Start</em> to begin. Mow everything!<br>
    Pro-tip: diagonal lines and tight spirals cut faster.
  </div>

  <div class="stick" id="stick" aria-hidden="true"><div class="nub" id="nub"></div></div>

  <!-- Intro overlay -->
  <div class="intro" id="intro">
    <h1 class="title">Turbo Turf Trimmer</h1>
    <div class="subtitle">1993 â€” <span style="color:#2fe06f">Arcade Mode</span></div>
    <button class="btn" id="startBtn">â–¶ Start</button>
    <div class="credit">Use WASD / Arrows Â· Touch joystick on mobile</div>
  </div>

  <!-- Score sidebar -->
  <aside class="sidebar" id="sidebar">
    <h4>Best Times</h4>
    <ol class="bestlist" id="bestList"></ol>
  </aside>

  <!-- Win modal -->
  <div class="modal" id="winModal">
    <div class="card">
      <h2>Good job! ðŸŒ±</h2>
      <div>All grass cut in <strong class="time" id="finalTime">00:00.0</strong></div>
      <div style="margin-top:10px; display:flex; gap:8px; justify-content:center;">
        <button class="btn" id="againBtn">Restart</button>
        <button class="btn" id="closeModalBtn">Close</button>
      </div>
      <div style="margin-top:10px; font-size:12px; opacity:0.8;">Your time is saved in Best Times</div>
    </div>
  </div>

<script>
// (JS is same as last version â€” omitted here for brevity)
</script>
</body>
</html>
